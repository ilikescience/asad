var asad=localStorage.asad?$.parseJSON(localStorage.asad):{songs:[]},getTemplate=function(){var e="data/template.json";$.getJSON(e,function(e){for(var t=e.tweet,n=e.fields,a=n.length-1;a>=0;a--){var r=n[a].fieldname,i=n[a].placeholder,o=n[a].type;$(".input").prepend("<"+o+' type="text" class="template--field" id="'+r+'" placeholder="'+i+'">'),0===a&&$(".template--field").on("keyup",function(){updateTweet()})}initTweet(t,n)})},initTweet=function(e,t){for(var n=0;n<=t.length-1;n++){var a=t[n].fieldname;e=e.replace("{"+a+"}",'<span id="span-'+a+'">'+a+"</span>")}$(".tweet--result").html(e)},updateTweet=function(){$(".input").find("input").each(function(){var e=$(this).attr("id"),t=$(this).val(),n=$("#span-"+e);n.html(""===t?$(this).id:t)}),updateTweetStatus()},updateTweetStatus=function(){var e=$(".tweet--result").text().length;$("#tweet--chars").text(e);var t=e>140?"bad":"good";$(".tweet--length").attr("class","tweet--length "+t)},getBitly=function(e){var t="748c81597b1afe6ae5a27a37d19a88bdc7bc7275",n=encodeURIComponent(e),a="https://api-ssl.bitly.com/v3/shorten?access_token="+t+"&longUrl="+n;$.getJSON(a,function(e){console.log("getting url");var t=e.data.url;$("#span-url").html(t)})},tweetLink=function(){var e=$(".tweet--result").text(),t=encodeURIComponent(e);$(".tweetlink--result").html("http://twitter.com/home/?status="+t)},saveCurrentSong=function(){var e={};$(".template--field").each(function(){var t=$(this).attr("id"),n=$(this).val();e[t]=n}),asad.songs.push(e),saveData(),updateSongList()},saveData=function(){localStorage.asad=JSON.stringify(asad)},clearSongList=function(){$(".saved").html("")},updateSongList=function(){var e=asad.songs;clearSongList();for(var t=e.length-1;t>=0;t--){var n=e[t].songname,a=e[t].artist,r=e[t].url,i="<div class='saved--song' id='saved-"+t+"''><span class='saved--title'>"+n+"</span><span class='saved--artist'>"+a+"</span><span class='saved--url'>"+r+"</span><span class='saved--delete'>remove</span></div>";$(".saved").prepend(i)}$(".saved--song").on("click",function(){var e=$(".saved--song").index($(this));removeSong(e)})},removeSong=function(e){asad.songs.splice(e,1),saveData(),clearSongList(),updateSongList()};$(document).ready(function(){getTemplate(),$(".tweet--result").on("keyup",function(){updateTweetStatus()}),$(".save").on("click",function(){saveCurrentSong()}),updateSongList()}),!function(e,t){"use strict";var n,a,r,i=e,o=i.document,s=i.navigator,l=i.setTimeout,c=i.clearTimeout,u=i.setInterval,d=i.clearInterval,f=i.getComputedStyle,p=i.encodeURIComponent,h=i.ActiveXObject,m=i.Error,y=i.Number.parseInt||i.parseInt,v=i.Number.parseFloat||i.parseFloat,g=i.Number.isNaN||i.isNaN,b=i.Date.now,w=i.Object.keys,x=i.Object.defineProperty,C=i.Object.prototype.hasOwnProperty,T=i.Array.prototype.slice,E=function(){var e=function(e){return e};if("function"==typeof i.wrap&&"function"==typeof i.unwrap)try{var t=o.createElement("div"),n=i.unwrap(t);1===t.nodeType&&n&&1===n.nodeType&&(e=i.unwrap)}catch(a){}return e}(),j=function(e){return T.call(e,0)},k=function(){var e,n,a,r,i,o,s=j(arguments),l=s[0]||{};for(e=1,n=s.length;n>e;e++)if(null!=(a=s[e]))for(r in a)C.call(a,r)&&(i=l[r],o=a[r],l!==o&&o!==t&&(l[r]=o));return l},D=function(e){var t,n,a,r;if("object"!=typeof e||null==e||"number"==typeof e.nodeType)t=e;else if("number"==typeof e.length)for(t=[],n=0,a=e.length;a>n;n++)C.call(e,n)&&(t[n]=D(e[n]));else{t={};for(r in e)C.call(e,r)&&(t[r]=D(e[r]))}return t},S=function(e,t){for(var n={},a=0,r=t.length;r>a;a++)t[a]in e&&(n[t[a]]=e[t[a]]);return n},O=function(e,t){var n={};for(var a in e)-1===t.indexOf(a)&&(n[a]=e[a]);return n},I=function(e){if(e)for(var t in e)C.call(e,t)&&delete e[t];return e},$=function(e,t){if(e&&1===e.nodeType&&e.ownerDocument&&t&&(1===t.nodeType&&t.ownerDocument&&t.ownerDocument===e.ownerDocument||9===t.nodeType&&!t.ownerDocument&&t===e.ownerDocument))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},L=function(e){var t;return"string"==typeof e&&e&&(t=e.split("#")[0].split("?")[0],t=e.slice(0,e.lastIndexOf("/")+1)),t},N=function(e){var t,n;return"string"==typeof e&&e&&(n=e.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]?t=n[1]:(n=e.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),n&&n[1]&&(t=n[1]))),t},_=function(){var e,t;try{throw new m}catch(n){t=n}return t&&(e=t.sourceURL||t.fileName||N(t.stack)),e},A=function(){var e,n,a;if(o.currentScript&&(e=o.currentScript.src))return e;if(n=o.getElementsByTagName("script"),1===n.length)return n[0].src||t;if("readyState"in n[0])for(a=n.length;a--;)if("interactive"===n[a].readyState&&(e=n[a].src))return e;return"loading"===o.readyState&&(e=n[n.length-1].src)?e:(e=_())?e:t},F=function(){var e,n,a,r=o.getElementsByTagName("script");for(e=r.length;e--;){if(!(a=r[e].src)){n=null;break}if(a=L(a),null==n)n=a;else if(n!==a){n=null;break}}return n||t},z=function(){var e=L(A())||F()||"";return e+"ZeroClipboard.swf"},Z=function(){return null==e.opener&&(!!e.top&&e!=e.top||!!e.parent&&e!=e.parent)}(),V={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,sandboxed:null,unavailable:null,degraded:null,deactivated:null,overdue:null,ready:null},X="11.0.0",Y={},B={},M=null,P=0,R=0,H={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed. May also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-sandboxed":"Attempting to run Flash in a sandboxed iframe, which is impossible","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-degraded":"Flash is unable to preserve data fidelity when communicating with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate.\nThis may also mean that the ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity.\nMay also be attempting to run Flash in a sandboxed iframe, which is impossible.","flash-overdue":"Flash communication was established but NOT within the acceptable time limit","version-mismatch":"ZeroClipboard JS version number does not match ZeroClipboard SWF version number","clipboard-error":"At least one error was thrown while ZeroClipboard was attempting to inject your data into the clipboard","config-mismatch":"ZeroClipboard configuration does not match Flash's reality","swf-not-found":"The ZeroClipboard SWF object could not be loaded, so please check your `swfPath` configuration and/or network connectivity"}},J=["flash-unavailable","flash-degraded","flash-overdue","version-mismatch","config-mismatch","clipboard-error"],U=["flash-disabled","flash-outdated","flash-sandboxed","flash-unavailable","flash-degraded","flash-deactivated","flash-overdue"],K=new RegExp("^flash-("+U.map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),W=new RegExp("^flash-("+U.slice(1).map(function(e){return e.replace(/^flash-/,"")}).join("|")+")$"),G={swfPath:z(),trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},q=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(C.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))G[t]=e[t];else if(null==V.bridge)if("containerId"===t||"swfObjectId"===t){if(!pt(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");G[t]=e[t]}else G[t]=e[t];return"string"==typeof e&&e?C.call(G,e)?G[e]:void 0:D(G)},Q=function(){return Rt(),{browser:S(s,["userAgent","platform","appName"]),flash:O(V,["bridge"]),zeroclipboard:{version:Jt.version,config:Jt.config()}}},et=function(){return!!(V.disabled||V.outdated||V.sandboxed||V.unavailable||V.degraded||V.deactivated)},tt=function(e,a){var r,i,o,s={};if("string"==typeof e&&e)o=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof a)for(r in e)C.call(e,r)&&"string"==typeof r&&r&&"function"==typeof e[r]&&Jt.on(r,e[r]);if(o&&o.length){for(r=0,i=o.length;i>r;r++)e=o[r].replace(/^on/,""),s[e]=!0,Y[e]||(Y[e]=[]),Y[e].push(a);if(s.ready&&V.ready&&Jt.emit({type:"ready"}),s.error){for(r=0,i=U.length;i>r;r++)if(V[U[r].replace(/^flash-/,"")]===!0){Jt.emit({type:"error",name:U[r]});break}n!==t&&Jt.version!==n&&Jt.emit({type:"error",name:"version-mismatch",jsVersion:Jt.version,swfVersion:n})}}return Jt},nt=function(e,t){var n,a,r,i,o;if(0===arguments.length)i=w(Y);else if("string"==typeof e&&e)i=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)C.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&Jt.off(n,e[n]);if(i&&i.length)for(n=0,a=i.length;a>n;n++)if(e=i[n].toLowerCase().replace(/^on/,""),o=Y[e],o&&o.length)if(t)for(r=o.indexOf(t);-1!==r;)o.splice(r,1),r=o.indexOf(t,r);else o.length=0;return Jt},at=function(e){var t;return t="string"==typeof e&&e?D(Y[e])||null:D(Y)},rt=function(e){var t,n,a;return e=ht(e),e&&!xt(e)?"ready"===e.type&&V.overdue===!0?Jt.emit({type:"error",name:"flash-overdue"}):(t=k({},e),bt.call(this,t),"copy"===e.type&&(a=Ot(B),n=a.data,M=a.formatMap),n):void 0},it=function(){var e=V.sandboxed;if(Rt(),"boolean"!=typeof V.ready&&(V.ready=!1),V.sandboxed!==e&&V.sandboxed===!0)V.ready=!1,Jt.emit({type:"error",name:"flash-sandboxed"});else if(!Jt.isFlashUnusable()&&null===V.bridge){var t=G.flashLoadTimeout;"number"==typeof t&&t>=0&&(P=l(function(){"boolean"!=typeof V.deactivated&&(V.deactivated=!0),V.deactivated===!0&&Jt.emit({type:"error",name:"flash-deactivated"})},t)),V.overdue=!1,Dt()}},ot=function(){Jt.clearData(),Jt.blur(),Jt.emit("destroy"),St(),Jt.off()},st=function(e,t){var n;if("object"==typeof e&&e&&"undefined"==typeof t)n=e,Jt.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var a in n)"string"==typeof a&&a&&C.call(n,a)&&"string"==typeof n[a]&&n[a]&&(B[a]=n[a])},lt=function(e){"undefined"==typeof e?(I(B),M=null):"string"==typeof e&&C.call(B,e)&&delete B[e]},ct=function(e){return"undefined"==typeof e?D(B):"string"==typeof e&&C.call(B,e)?B[e]:void 0},ut=function(e){if(e&&1===e.nodeType){a&&(zt(a,G.activeClass),a!==e&&zt(a,G.hoverClass)),a=e,Ft(e,G.hoverClass);var t=e.getAttribute("title")||G.title;if("string"==typeof t&&t){var n=kt(V.bridge);n&&n.setAttribute("title",t)}var r=G.forceHandCursor===!0||"pointer"===Zt(e,"cursor");Mt(r),Bt()}},dt=function(){var e=kt(V.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px"),a&&(zt(a,G.hoverClass),zt(a,G.activeClass),a=null)},ft=function(){return a||null},pt=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},ht=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){t=t.toLowerCase(),!e.target&&(/^(copy|aftercopy|_click)$/.test(t)||"error"===t&&"clipboard-error"===e.name)&&(e.target=r),k(e,{type:t,target:e.target||a||null,relatedTarget:e.relatedTarget||null,currentTarget:V&&V.bridge||null,timeStamp:e.timeStamp||b()||null});var n=H[e.type];return"error"===e.type&&e.name&&n&&(n=n[e.name]),n&&(e.message=n),"ready"===e.type&&k(e,{target:null,version:V.version}),"error"===e.type&&(K.test(e.name)&&k(e,{target:null,minimumVersion:X}),W.test(e.name)&&k(e,{version:V.version})),"copy"===e.type&&(e.clipboardData={setData:Jt.setData,clearData:Jt.clearData}),"aftercopy"===e.type&&(e=It(e,M)),e.target&&!e.relatedTarget&&(e.relatedTarget=mt(e.target)),yt(e)}},mt=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?o.getElementById(t):null},yt=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,a="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,r="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,s=Vt(n),l=i.screenLeft||i.screenX||0,c=i.screenTop||i.screenY||0,u=o.body.scrollLeft+o.documentElement.scrollLeft,d=o.body.scrollTop+o.documentElement.scrollTop,f=s.left+("number"==typeof e._stageX?e._stageX:0),p=s.top+("number"==typeof e._stageY?e._stageY:0),h=f-u,m=p-d,y=l+h,v=c+m,g="number"==typeof e.movementX?e.movementX:0,b="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,k(e,{srcElement:n,fromElement:a,toElement:r,screenX:y,screenY:v,pageX:f,pageY:p,clientX:h,clientY:m,x:h,y:m,movementX:g,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},vt=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},gt=function(e,t,n,a){a?l(function(){e.apply(t,n)},0):e.apply(t,n)},bt=function(e){if("object"==typeof e&&e&&e.type){var t=vt(e),n=Y["*"]||[],a=Y[e.type]||[],r=n.concat(a);if(r&&r.length){var o,s,l,c,u,d=this;for(o=0,s=r.length;s>o;o++)l=r[o],c=d,"string"==typeof l&&"function"==typeof i[l]&&(l=i[l]),"object"==typeof l&&l&&"function"==typeof l.handleEvent&&(c=l,l=l.handleEvent),"function"==typeof l&&(u=k({},e),gt(l,c,[u],t))}return this}},wt=function(e){var t=null;return(Z===!1||e&&"error"===e.type&&e.name&&-1!==J.indexOf(e.name))&&(t=!1),t},xt=function(e){var t=e.target||a||null,i="swf"===e._source;switch(delete e._source,e.type){case"error":var o="flash-sandboxed"===e.name||wt(e);"boolean"==typeof o&&(V.sandboxed=o),-1!==U.indexOf(e.name)?k(V,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,degraded:"flash-degraded"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1}):"version-mismatch"===e.name&&(n=e.swfVersion,k(V,{disabled:!1,outdated:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:!1,ready:!1})),Yt();break;case"ready":n=e.swfVersion;var s=V.deactivated===!0;k(V,{disabled:!1,outdated:!1,sandboxed:!1,unavailable:!1,degraded:!1,deactivated:!1,overdue:s,ready:!s}),Yt();break;case"beforecopy":r=t;break;case"copy":var l,c,u=e.relatedTarget;!B["text/html"]&&!B["text/plain"]&&u&&(c=u.value||u.outerHTML||u.innerHTML)&&(l=u.value||u.textContent||u.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l),c!==l&&e.clipboardData.setData("text/html",c)):!B["text/plain"]&&e.target&&(l=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",l));break;case"aftercopy":Ct(e),Jt.clearData(),t&&t!==At()&&t.focus&&t.focus();break;case"_mouseover":Jt.focus(t),G.bubbleEvents===!0&&i&&(t&&t!==e.relatedTarget&&!$(e.relatedTarget,t)&&Tt(k({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),Tt(k({},e,{type:"mouseover"})));break;case"_mouseout":Jt.blur(),G.bubbleEvents===!0&&i&&(t&&t!==e.relatedTarget&&!$(e.relatedTarget,t)&&Tt(k({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),Tt(k({},e,{type:"mouseout"})));break;case"_mousedown":Ft(t,G.activeClass),G.bubbleEvents===!0&&i&&Tt(k({},e,{type:e.type.slice(1)}));break;case"_mouseup":zt(t,G.activeClass),G.bubbleEvents===!0&&i&&Tt(k({},e,{type:e.type.slice(1)}));break;case"_click":r=null,G.bubbleEvents===!0&&i&&Tt(k({},e,{type:e.type.slice(1)}));break;case"_mousemove":G.bubbleEvents===!0&&i&&Tt(k({},e,{type:e.type.slice(1)}))}return/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)?!0:void 0},Ct=function(e){if(e.errors&&e.errors.length>0){var t=D(e);k(t,{type:"error",name:"clipboard-error"}),delete t.success,l(function(){Jt.emit(t)},0)}},Tt=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,a=n&&n.ownerDocument||o,r={view:a.defaultView||i,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:a.createEvent?0:1},s=k(r,e);n&&a.createEvent&&n.dispatchEvent&&(s=[s.type,s.canBubble,s.cancelable,s.view,s.detail,s.screenX,s.screenY,s.clientX,s.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,s.button,s.relatedTarget],t=a.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,s),t._source="js",n.dispatchEvent(t)))}},Et=function(){var e=G.flashLoadTimeout;if("number"==typeof e&&e>=0){var t=Math.min(1e3,e/10),n=G.swfObjectId+"_fallbackContent";R=u(function(){var e=o.getElementById(n);Xt(e)&&(Yt(),V.deactivated=null,Jt.emit({type:"error",name:"swf-not-found"}))},t)}},jt=function(){var e=o.createElement("div");return e.id=G.containerId,e.className=G.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+Pt(G.zIndex),e},kt=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},Dt=function(){var e,t=V.bridge,n=kt(t);if(!t){var a=_t(i.location.host,G),r="never"===a?"none":"all",s=Lt(k({jsVersion:Jt.version},G)),l=G.swfPath+$t(G.swfPath,G);n=jt();var c=o.createElement("div");n.appendChild(c),o.body.appendChild(n);var u=o.createElement("div"),d="activex"===V.pluginType;u.innerHTML='<object id="'+G.swfObjectId+'" name="'+G.swfObjectId+'" width="100%" height="100%" '+(d?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+l+'"')+">"+(d?'<param name="movie" value="'+l+'"/>':"")+'<param name="allowScriptAccess" value="'+a+'"/><param name="allowNetworking" value="'+r+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+s+'"/><div id="'+G.swfObjectId+'_fallbackContent">&nbsp;</div></object>',t=u.firstChild,u=null,E(t).ZeroClipboard=Jt,n.replaceChild(t,c),Et()}return t||(t=o[G.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),V.bridge=t||null,t},St=function(){var e=V.bridge;if(e){var a=kt(e);a&&("activex"===V.pluginType&&"readyState"in e?(e.style.display="none",function r(){if(4===e.readyState){for(var t in e)"function"==typeof e[t]&&(e[t]=null);e.parentNode&&e.parentNode.removeChild(e),a.parentNode&&a.parentNode.removeChild(a)}else l(r,10)}()):(e.parentNode&&e.parentNode.removeChild(e),a.parentNode&&a.parentNode.removeChild(a))),Yt(),V.ready=null,V.bridge=null,V.deactivated=null,n=t}},Ot=function(e){var t={},n={};if("object"==typeof e&&e){for(var a in e)if(a&&C.call(e,a)&&"string"==typeof e[a]&&e[a])switch(a.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[a],n.text=a;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[a],n.html=a;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[a],n.rtf=a}return{data:t,formatMap:n}}},It=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var a in e)if(C.call(e,a))if("errors"===a){n[a]=e[a]?e[a].slice():[];for(var r=0,i=n[a].length;i>r;r++)n[a][r].format=t[n[a][r].format]}else if("success"!==a&&"data"!==a)n[a]=e[a];else{n[a]={};var o=e[a];for(var s in o)s&&C.call(o,s)&&C.call(t,s)&&(n[a][t[s]]=o[s])}return n},$t=function(e,t){var n=null==t||t&&t.cacheBust===!0;return n?(-1===e.indexOf("?")?"?":"&")+"noCache="+b():""},Lt=function(e){var t,n,a,r,o="",s=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?r=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(r=e.trustedDomains)),r&&r.length)for(t=0,n=r.length;n>t;t++)if(C.call(r,t)&&r[t]&&"string"==typeof r[t]){if(a=Nt(r[t]),!a)continue;if("*"===a){s.length=0,s.push(a);break}s.push.apply(s,[a,"//"+a,i.location.protocol+"//"+a])}return s.length&&(o+="trustedOrigins="+p(s.join(","))),e.forceEnhancedClipboard===!0&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+p(e.swfObjectId)),"string"==typeof e.jsVersion&&e.jsVersion&&(o+=(o?"&":"")+"jsVersion="+p(e.jsVersion)),o},Nt=function(e){if(null==e||""===e)return null;if(e=e.replace(/^\s+|\s+$/g,""),""===e)return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},_t=function(){var e=function(e){var t,n,a,r=[];if("string"==typeof e&&(e=[e]),"object"!=typeof e||!e||"number"!=typeof e.length)return r;for(t=0,n=e.length;n>t;t++)if(C.call(e,t)&&(a=Nt(e[t]))){if("*"===a){r.length=0,r.push("*");break}-1===r.indexOf(a)&&r.push(a)}return r};return function(t,n){var a=Nt(n.swfPath);null===a&&(a=t);var r=e(n.trustedDomains),i=r.length;if(i>0){if(1===i&&"*"===r[0])return"always";if(-1!==r.indexOf(t))return 1===i&&t===a?"sameDomain":"always"}return"never"}}(),At=function(){try{return o.activeElement}catch(e){return null}},Ft=function(e,t){var n,a,r,i=[];if("string"==typeof t&&t&&(i=t.split(/\s+/)),e&&1===e.nodeType&&i.length>0)if(e.classList)for(n=0,a=i.length;a>n;n++)e.classList.add(i[n]);else if(e.hasOwnProperty("className")){for(r=" "+e.className+" ",n=0,a=i.length;a>n;n++)-1===r.indexOf(" "+i[n]+" ")&&(r+=i[n]+" ");e.className=r.replace(/^\s+|\s+$/g,"")}return e},zt=function(e,t){var n,a,r,i=[];if("string"==typeof t&&t&&(i=t.split(/\s+/)),e&&1===e.nodeType&&i.length>0)if(e.classList&&e.classList.length>0)for(n=0,a=i.length;a>n;n++)e.classList.remove(i[n]);else if(e.className){for(r=(" "+e.className+" ").replace(/[\r\n\t]/g," "),n=0,a=i.length;a>n;n++)r=r.replace(" "+i[n]+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}return e},Zt=function(e,t){var n=f(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},Vt=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n=e.getBoundingClientRect(),a=i.pageXOffset,r=i.pageYOffset,s=o.documentElement.clientLeft||0,l=o.documentElement.clientTop||0,c=0,u=0;if("relative"===Zt(o.body,"position")){var d=o.body.getBoundingClientRect(),f=o.documentElement.getBoundingClientRect();c=d.left-f.left||0,u=d.top-f.top||0}t.left=n.left+a-s-c,t.top=n.top+r-l-u,t.width="width"in n?n.width:n.right-n.left,t.height="height"in n?n.height:n.bottom-n.top}return t},Xt=function(e){if(!e)return!1;var t=f(e,null),n=v(t.height)>0,a=v(t.width)>0,r=v(t.top)>=0,i=v(t.left)>=0,o=n&&a&&r&&i,s=o?null:Vt(e),l="none"!==t.display&&"collapse"!==t.visibility&&(o||!!s&&(n||s.height>0)&&(a||s.width>0)&&(r||s.top>=0)&&(i||s.left>=0));return l},Yt=function(){c(P),P=0,d(R),R=0},Bt=function(){var e;if(a&&(e=kt(V.bridge))){var t=Vt(a);k(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+Pt(G.zIndex)})}},Mt=function(e){V.ready===!0&&(V.bridge&&"function"==typeof V.bridge.setHandCursor?V.bridge.setHandCursor(e):V.ready=!1)},Pt=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||g(e)?"string"==typeof e&&(t=Pt(y(e,10))):t=e,"number"==typeof t?t:"auto"},Rt=function(t){var n,a,r,i=V.sandboxed,o=null;if(t=t===!0,Z===!1)o=!1;else{try{a=e.frameElement||null}catch(s){r={name:s.name,message:s.message}}if(a&&1===a.nodeType&&"IFRAME"===a.nodeName)try{o=a.hasAttribute("sandbox")}catch(s){o=null}else{try{n=document.domain||null}catch(s){n=null}(null===n||r&&"SecurityError"===r.name&&/(^|[\s\(\[@])sandbox(es|ed|ing|[\s\.,!\)\]@]|$)/.test(r.message.toLowerCase()))&&(o=!0)}}return V.sandboxed=o,i===o||t||Ht(h),o},Ht=function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function a(e){e&&(l=!0,e.version&&(d=t(e.version)),!d&&e.description&&(d=t(e.description)),e.filename&&(u=n(e.filename)))}var r,i,o,l=!1,c=!1,u=!1,d="";if(s.plugins&&s.plugins.length)r=s.plugins["Shockwave Flash"],a(r),s.plugins["Shockwave Flash 2.0"]&&(l=!0,d="2.0.0.11");else if(s.mimeTypes&&s.mimeTypes.length)o=s.mimeTypes["application/x-shockwave-flash"],r=o&&o.enabledPlugin,a(r);else if("undefined"!=typeof e){c=!0;try{i=new e("ShockwaveFlash.ShockwaveFlash.7"),l=!0,d=t(i.GetVariable("$version"))}catch(f){try{i=new e("ShockwaveFlash.ShockwaveFlash.6"),l=!0,d="6.0.21"}catch(p){try{i=new e("ShockwaveFlash.ShockwaveFlash"),l=!0,d=t(i.GetVariable("$version"))}catch(h){c=!1}}}}V.disabled=l!==!0,V.outdated=d&&v(d)<v(X),V.version=d||"0.0.0",V.pluginType=u?"pepper":c?"activex":l?"netscape":"unknown"};Ht(h),Rt(!0);var Jt=function(){return this instanceof Jt?void("function"==typeof Jt._createClient&&Jt._createClient.apply(this,j(arguments))):new Jt};x(Jt,"version",{value:"2.2.0",writable:!1,configurable:!0,enumerable:!0}),Jt.config=function(){return q.apply(this,j(arguments))},Jt.state=function(){return Q.apply(this,j(arguments))},Jt.isFlashUnusable=function(){return et.apply(this,j(arguments))},Jt.on=function(){return tt.apply(this,j(arguments))},Jt.off=function(){return nt.apply(this,j(arguments))},Jt.handlers=function(){return at.apply(this,j(arguments))},Jt.emit=function(){return rt.apply(this,j(arguments))},Jt.create=function(){return it.apply(this,j(arguments))},Jt.destroy=function(){return ot.apply(this,j(arguments))},Jt.setData=function(){return st.apply(this,j(arguments))},Jt.clearData=function(){return lt.apply(this,j(arguments))},Jt.getData=function(){return ct.apply(this,j(arguments))},Jt.focus=Jt.activate=function(){return ut.apply(this,j(arguments))},Jt.blur=Jt.deactivate=function(){return dt.apply(this,j(arguments))},Jt.activeElement=function(){return ft.apply(this,j(arguments))};var Ut=0,Kt={},Wt=0,Gt={},qt={};k(G,{autoActivate:!0});var Qt=function(e){var t=this;t.id=""+Ut++,Kt[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),Jt.on("*",function(e){return t.emit(e)}),Jt.on("destroy",function(){t.destroy()}),Jt.create()},en=function(e,a){var r,i,o,s={},l=Kt[this.id],c=l&&l.handlers;if(!l)throw new Error("Attempted to add new listener(s) to a destroyed ZeroClipboard client instance");if("string"==typeof e&&e)o=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof a)for(r in e)C.call(e,r)&&"string"==typeof r&&r&&"function"==typeof e[r]&&this.on(r,e[r]);if(o&&o.length){for(r=0,i=o.length;i>r;r++)e=o[r].replace(/^on/,""),s[e]=!0,c[e]||(c[e]=[]),c[e].push(a);if(s.ready&&V.ready&&this.emit({type:"ready",client:this}),s.error){for(r=0,i=U.length;i>r;r++)if(V[U[r].replace(/^flash-/,"")]){this.emit({type:"error",name:U[r],client:this});break}n!==t&&Jt.version!==n&&this.emit({type:"error",name:"version-mismatch",jsVersion:Jt.version,swfVersion:n})}}return this},tn=function(e,t){var n,a,r,i,o,s=Kt[this.id],l=s&&s.handlers;if(!l)return this;if(0===arguments.length)i=w(l);else if("string"==typeof e&&e)i=e.split(/\s+/);else if("object"==typeof e&&e&&"undefined"==typeof t)for(n in e)C.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(i&&i.length)for(n=0,a=i.length;a>n;n++)if(e=i[n].toLowerCase().replace(/^on/,""),o=l[e],o&&o.length)if(t)for(r=o.indexOf(t);-1!==r;)o.splice(r,1),r=o.indexOf(t,r);else o.length=0;return this},nn=function(e){var t=null,n=Kt[this.id]&&Kt[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:D(n)),t},an=function(e){if(cn.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=k({},e));var t=k({},ht(e),{client:this});un.call(this,t)}return this},rn=function(e){if(!Kt[this.id])throw new Error("Attempted to clip element(s) to a destroyed ZeroClipboard client instance");e=dn(e);for(var t=0;t<e.length;t++)if(C.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===Gt[e[t].zcClippingId].indexOf(this.id)&&Gt[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Wt++,Gt[e[t].zcClippingId]=[this.id],G.autoActivate===!0&&fn(e[t]));var n=Kt[this.id]&&Kt[this.id].elements;-1===n.indexOf(e[t])&&n.push(e[t])}return this},on=function(e){var t=Kt[this.id];if(!t)return this;var n,a=t.elements;e="undefined"==typeof e?a.slice(0):dn(e);for(var r=e.length;r--;)if(C.call(e,r)&&e[r]&&1===e[r].nodeType){for(n=0;-1!==(n=a.indexOf(e[r],n));)a.splice(n,1);var i=Gt[e[r].zcClippingId];if(i){for(n=0;-1!==(n=i.indexOf(this.id,n));)i.splice(n,1);0===i.length&&(G.autoActivate===!0&&pn(e[r]),delete e[r].zcClippingId)}}return this},sn=function(){var e=Kt[this.id];return e&&e.elements?e.elements.slice(0):[]},ln=function(){Kt[this.id]&&(this.unclip(),this.off(),delete Kt[this.id])},cn=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=Kt[this.id],n=t&&t.elements,a=!!n&&n.length>0,r=!e.target||a&&-1!==n.indexOf(e.target),i=e.relatedTarget&&a&&-1!==n.indexOf(e.relatedTarget),o=e.client&&e.client===this;return t&&(r||i||o)?!0:!1},un=function(e){var t=Kt[this.id];if("object"==typeof e&&e&&e.type&&t){var n=vt(e),a=t&&t.handlers["*"]||[],r=t&&t.handlers[e.type]||[],o=a.concat(r);if(o&&o.length){var s,l,c,u,d,f=this;for(s=0,l=o.length;l>s;s++)c=o[s],u=f,"string"==typeof c&&"function"==typeof i[c]&&(c=i[c]),"object"==typeof c&&c&&"function"==typeof c.handleEvent&&(u=c,c=c.handleEvent),"function"==typeof c&&(d=k({},e),gt(c,u,[d],n))}}},dn=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},fn=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=i.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=i.event))&&(t(n),Jt.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),qt[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},pn=function(e){if(e&&1===e.nodeType){var t=qt[e.zcClippingId];if("object"==typeof t&&t){for(var n,a,r=["move","leave","enter","out","over"],i=0,o=r.length;o>i;i++)n="mouse"+r[i],a=t[n],"function"==typeof a&&e.removeEventListener(n,a,!1);delete qt[e.zcClippingId]}}};Jt._createClient=function(){Qt.apply(this,j(arguments))},Jt.prototype.on=function(){return en.apply(this,j(arguments))},Jt.prototype.off=function(){return tn.apply(this,j(arguments))},Jt.prototype.handlers=function(){return nn.apply(this,j(arguments))},Jt.prototype.emit=function(){return an.apply(this,j(arguments))},Jt.prototype.clip=function(){return rn.apply(this,j(arguments))},Jt.prototype.unclip=function(){return on.apply(this,j(arguments))},Jt.prototype.elements=function(){return sn.apply(this,j(arguments))},Jt.prototype.destroy=function(){return ln.apply(this,j(arguments))},Jt.prototype.setText=function(e){if(!Kt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Jt.setData("text/plain",e),this},Jt.prototype.setHtml=function(e){if(!Kt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Jt.setData("text/html",e),this},Jt.prototype.setRichText=function(e){if(!Kt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Jt.setData("application/rtf",e),this},Jt.prototype.setData=function(){if(!Kt[this.id])throw new Error("Attempted to set pending clipboard data from a destroyed ZeroClipboard client instance");return Jt.setData.apply(this,j(arguments)),this},Jt.prototype.clearData=function(){if(!Kt[this.id])throw new Error("Attempted to clear pending clipboard data from a destroyed ZeroClipboard client instance");return Jt.clearData.apply(this,j(arguments)),this},Jt.prototype.getData=function(){if(!Kt[this.id])throw new Error("Attempted to get pending clipboard data from a destroyed ZeroClipboard client instance");return Jt.getData.apply(this,j(arguments))},"function"==typeof define&&define.amd?define(function(){return Jt}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Jt:e.ZeroClipboard=Jt}(function(){return this||window}());